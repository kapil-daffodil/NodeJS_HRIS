/**
 * Created with IntelliJ IDEA.
 * User: Administrator
 * Date: 8/5/13
 * Time: 12:17 PM
 * To change this template use File | Settings | File Templates.
 */

var HttpCommunication = require("../server/communication/HTTPCommunication.js")
var ApplaneCallback = require("apputil/ApplaneCallback.js");


var CURRENT_USER = "current_user";

exports.login = function (username, password, usergroup, callback) {
    var options = {};
    options[HttpCommunication.Services.Login.USERNAME] = username;
    options[HttpCommunication.Services.Login.PASSWORD] = password;
    options[HttpCommunication.Services.Login.USERGROUP] = usergroup;
    HttpCommunication.call(HttpCommunication.Services.LOGIN, options, ApplaneCallback(callback, function (user) {
        callback(null, user);
    }));
}

exports.logout = function (callback) {
    var options = {};
    HttpCommunication.call(HttpCommunication.Services.LOGOUT, options, ApplaneCallback(callback, function () {
        callback(null, true);
    }));
}

exports.createUser = function (username, password, usergroup, callback) {
    var options = {};
    options[HttpCommunication.Services.CreateUser.USERNAME] = username;
    options[HttpCommunication.Services.CreateUser.PASSWORD] = password;
    options[HttpCommunication.Services.CreateUser.USERGROUP] = usergroup;
    HttpCommunication.call(HttpCommunication.Services.CREATE_USER, options, callback);
}

exports.getCurrentUser = function (callback) {
    var options = {};
    HttpCommunication.call(HttpCommunication.Services.CURRENT_USER, options, ApplaneCallback(callback, function (user) {
        callback(null, user);
    }));
}
